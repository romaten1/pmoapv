<?php
/************************************************************************/
/* OpenTEST System: The System Of Computer Testing Knowleges            */
/* ============================================                         */
/*                                                                      */
/* Copyright (c) 2002-2005 by OpenTEST Team                             */
/* http://opentest.com.ua                                               */
/* e-mail: opentest@opentest.com.ua                                     */
/*                                                                      */
/************************************************************************/
/* 25/11/2004 22:32:01								                    */
/************************************************************************/
if (INDEXPHP != 1) {
    die ( "You can't access this file directly..." );
}

// ���������� � MySql
$mysql_handler = mysql_connect( $config['mysql_host'], $config['mysql_user'],
    $config['mysql_password'] ) or die ( _DB1 . mysql_error() );

mysql_query( "SET NAMES utf8" ) or die( mysql_error() );

// �������� ���� ������
mysql_select_db( $config['mysql_dbname'] ) or die( _DB2 . mysql_error() );

function sql_query( $sql )
{
    global $config, $db_query_count;
    if ($config['debug_query']) {
        echo "<font class=\"debug\">SQL query: " . str_replace( ",", ", ", $sql ) . "</font><br>";
    }
    // ��������� $sql �������
    $result = mysql_query( $sql ) or die( mysql_error() );
    $db_query_count ++;
    return $result;
}

function sql_single_query( $sql )
{
    global $config, $db_query_count;
    if ($config['debug_query']) {
        echo "<font class=\"debug\">SQL query: " . str_replace( ",", ", ", $sql ) . "</font><br>";
    }
    // ��������� $sql �������
    $result = mysql_query( $sql ) or die ( mysql_error() );
    // �������� �� �������������� ����������
    //if(mysql_num_rows($result)!=1) die (mysql_error());
    if (mysql_num_rows( $result ) != 1) {
        echo _DB3;
    }
    $row = mysql_fetch_array( $result );
    $db_query_count ++;
    return $row;
}

?>